extends layout

block content
  h1.mb-4= title

  form(method='POST')
    .mb-3
      label.form-label(for='title') Title:
      input#title.form-control(type='text', placeholder='Name of book' name='title' required value=(undefined===book ? '' : book.title))
    
    .mb-3
      label.form-label(for='author') Author:
      select#author.form-control(name='author' required)
        option(value='') --Please select an author--
        for author in authors
          - var selected = book && author._id.toString() === book.author._id.toString() ? 'selected' : false;
          option(value=author._id, selected=selected) #{author.name}
    
    .mb-3
      label.form-label(for='summary') Summary:
      textarea#summary.form-control(placeholder='Summary' name='summary' required rows="3")= undefined===book ? '' : book.summary
    
    .mb-3
      label.form-label(for='isbn') ISBN:
      input#isbn.form-control(type='text', placeholder='ISBN13' name='isbn' value=(undefined===book ? '' : book.isbn) required)
    
    .mb-3
      label.form-label Genre:
      .row
        for genre in genres
          .col-md-4.mb-2
            .form-check
              input.form-check-input(type='checkbox', name='genre', id=genre._id, value=genre._id, checked=genre.checked)
              label.form-check-label(for=genre._id) #{genre.name}
    
    button.btn.btn-primary(type='submit') Submit

  if errors
    .alert.alert-danger.mt-4
      h4.alert-heading Form Errors
      ul.mb-0
        for error in errors
          li!= error.msg